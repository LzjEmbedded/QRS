操作系统中断知识
===

1. 什么是中断？在嵌入式系统中，为什么中断很重要？
    <details>
      <summary>参考答案</summary>

      中断是计算机系统中的一种机制，用于在当前执行的程序或任务被中断处理程序（Interrupt Service Routine，ISR）中断执行时，响应和处理发生的事件或信号。在嵌入式系统中，中断非常重要的原因包括：
      1. `实时响应`：嵌入式系统通常需要实时响应外部事件，如传感器输入、通信数据到达等。中断允许系统立即中断当前任务的执行，转而处理紧急事件，从而满足实时性要求。
      2. `异步处理`：中断机制可以处理异步事件，这些事件无法通过程序的顺序执行来预测。通过中断，系统可以立即响应和处理这些事件，而无需等待主程序轮询或检查。
      3. `多任务处理`：中断机制使得多个任务能够并发地运行。当一个任务被中断时，系统可以立即切换到另一个任务，并在中断处理完成后返回到中断之前的执行状态。
      4. `事件驱动`：嵌入式系统通常是事件驱动的，即通过检测和处理事件来触发特定的操作。中断机制使得系统能够及时响应和处理这些事件，从而实现事件驱动的功能。
    </details>

2. 请解释中断处理和中断服务程序的概念
    <details>
      <summary>参考答案</summary>

      1. `中断`是计算机系统中的一种机制，用于向CPU发出异步信号，以通知操作系统发生了某种事件，例如外部设备完成了输入/输出操作或发生了错误。中断可以打断正在执行的程序，并立即转移到相应的中断服务程序中进行处理。
      2. `中断处理`是指操作系统对中断事件的响应和处理过程。当发生中断时，CPU会立即中断当前正在执行的任务，并转到与中断事件相关的中断服务程序。中断处理程序负责处理中断事件，保存当前任务的上下文，执行中断服务程序，处理中断事件后恢复上下文并返回到原任务。
      3. `中断服务程序`是与特定中断事件相关联的程序，它负责处理特定的中断事件。每个中断事件都有一个唯一的中断向量或中断号，操作系统根据中断号找到对应的中断服务程序。中断服务程序通常是预先定义好的，它们执行特定的操作来处理中断事件，例如读取设备数据、响应用户输入等。
    </details>

3. 解释操作系统中的信号和信号处理程序的概念。
    <details>
      <summary>参考答案</summary>

      1. 在操作系统中，`信号`是一种用于通知进程发生某个事件或异常情况的机制。它是一种`软件中断`，可以从内核（操作系统的核心）发送给进程。当发生某个特定的事件或条件时，内核可以向进程发送一个信号，进程可以捕获并处理该信号。
      2. `信号处理程序`是一个用于处理接收到的信号的特殊函数。当进程接收到一个信号时，操作系统会将控制权转移到相应的信号处理程序，该程序执行与信号相关的操作。信号处理程序可以执行各种操作，如捕获和处理异常、记录日志、执行特定的操作等。

      信号和信号处理程序在操作系统中起到以下作用：
      3. `异常处理`：当进程遇到错误或异常情况时，操作系统可以向进程发送相应的信号，使得进程能够捕获并处理这些异常，保证程序的稳定性和可靠性。
      4. `事件通知`：操作系统可以向进程发送信号，通知其发生了某个特定的事件，如键盘输入、鼠标点击等。进程可以捕获这些信号并作出相应的响应。
      5. `进程间通信`：进程可以使用信号进行通信。一个进程可以向另一个进程发送信号，请求某种操作或提醒对方发生了某个事件。
    </details>

4. 介绍中断向量表和中断优先级的概念。
    <details>
      <summary>参考答案</summary>

      1. `中断向量表（Interrupt Vector Table）`是操作系统用于管理和响应中断的数据结构。它是一个预先定义的表格，存储了每个中断类型对应的中断处理程序的入口地址。当发生一个中断时，硬件会通过中断控制器将中断信号发送给操作系统。操作系统根据中断类型，在中断向量表中查找相应的中断处理程序的入口地址，并跳转到该地址开始执行中断处理程序。中断向量表的目的是为了提供一种快速的、固定的方式来寻找中断处理程序，以实现对中断的及时响应。每个中断类型在中断向量表中有一个唯一的入口地址，操作系统可以根据需要为每个中断类型编写相应的处理程序，并将其地址存储在中断向量表中。
      2. `中断优先级`是用于确定中断响应顺序的概念。当多个中断同时发生时，中断控制器会根据中断优先级来确定哪个中断被优先处理。较高优先级的中断将中断较低优先级的中断，并立即处理该中断。中断优先级通常由硬件或操作系统设定，并可以根据需要进行配置和调整。

      参考资料:
      - [Interrupt vector table](https://en.wikipedia.org/wiki/Interrupt_vector_table)
      - [ARM Vector table](https://developer.arm.com/documentation/dui0552/a/the-cortex-m3-processor/exception-model/vector-table)
      - [Exceptions of Arm](https://wiki.osdev.org/ARM_Overview#Exceptions)
      - [What is Interrupt Vector Table?](https://microcontrollerslab.com/what-is-interrupt-vector-table/)
    </details>